---
tags: Cpp
---
# macro

宏就是编译器在预处理阶段进行的**文本替换**，编译器(预处理器)对宏只进行简单的文本替换，而不会进行语法检查。 习惯上用大写字母表示 宏名

## 注意

- 将宏定义中的 “参数” 和 整个宏 都用括弧括起来。这样可以避免一些意外的错误，比如宏定义中的参数和其他代码中的变量重名。
  - `#define MIN(A, B) ((A) <= (B) ? (A) : (B))`
- 防止宏的副作用
  - 上面的宏对`MIN(*p++, b)`指针`p`会作三次`++`自增操作。
- 宏不支持递归
- 宏从内向外展开

## 特殊符号

- `#`符号把一个符号直接转换为字符串，比如`#define STR(x) #x`，`STR(abc)`会被替换为`"abc"`
- `##`符号会连接两个符号，从而产生新的符号(词法层次)，比如`#define CONCAT(x, y) x##y`，`CONCAT(a, b)`会被替换为`ab`
ANSI标准说明了五个预定义的宏名： `__LINE__`、`__FILE__`、`__DATE__`、`__TIME__`、`__TIMESTAMP__`、`__STDC__`、__cplusplus
