---
tags: devops
---

# nginx

## 作用

### 反向代理

当接入服务器的用户过多时，需要增加多台服务器，而 Nginx 负责代理这些服务器的接入，与[[网络]]中的 VPN 正向代理相反

### 负载均衡

轮流接入，给各个服务器分配接入的权重

iphash，固定 ip 接入固定的服务器

### 动静分离

静态资源和动态资源请求可以放到 Nginx 里

## Nginx 常用命令

```bash
cd /usr/local/nginx/sbin/
#启动
./nginx
#停止
./nginx -s stop
#安全退出
./nginx -s quit
#重新加载配置文件
./nginx -s reload
```

## Nginx 配置文件

```nginx
user www www;

#nginx进程数
worker_processes 8;

upstream backend {
    server 127.0.0.1:8080 weight=1
    server 127.0.0.1:8081 weight=2
}

http {
    include mime.types;
    gzip on;

    server {
        listen 80;
        server_name localhost;

        location / {
            root html;
            index index.html index.htm;
        }

        error_page  404              /404.html;
        location = /50x.html {
            root html;
        }

        proxy_pass http://backend;
    }
}
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[网络]: ../network/网络.md "计算机网络基础"
[//end]: # "Autogenerated link references"
