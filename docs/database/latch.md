---
tags: CS, DB
---
# Latch

latch 有两种模式：

- 读取：允许多个线程同时读取同一项。一个线程可以获取读 latch ，即使另一个线程也已经获取了它。
- 写入：只允许一个线程访问该项目。如果另一个线程以任何模式持有写 latch ，则该线程不能获取该写 latch 。持有写 latch 的线程还可以防止其他线程获取读 latch 。

## latch 的实现

- 直接利用 [[os]]的[[Lock#Futex：Fast Username muTexes]] 实现写入时控制
  - 开销比较大
- Test-and-Set Spin Latch(TAS)
  - 由 DBMS 控制的 [[Lock#自旋锁 Spin Lock]]
  - not scalable nor cache-friendly
- Reader-Writer Latch
  - Latch 跟踪有多少线程分别在 read/write  模式下持有/等待 latch

## [[哈希表]] latching

## [[B 树#B+ 树]] latching

[//begin]: # "Autogenerated link references for markdown compatibility"
[os]: <../operating system/os.md> "操作系统"
[Lock#Futex：Fast Username muTexes]: <../operating system/Lock.md> "Lock"
[Lock#自旋锁 Spin Lock]: <../operating system/Lock.md> "Lock"
[哈希表]: ../algorithm/data_structure/哈希表.md "哈希表"
[B 树#B+ 树]: <../../B 树.md> "B 树"
[//end]: # "Autogenerated link references"
