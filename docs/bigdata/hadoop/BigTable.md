---
tags: devops
---

# BigTable @chang2008bigtable

基于[[GFS]]的结构化数据的存储系统，实际上是一个 KV 数据库

## 数据结构

- `key`：行关键字+列关键字+时间戳，例如 url+title+2019-01-01
- `value`：未解析的 byte 数组

## [[NoSQL]]

BigTable 提供了

- 建表、删表等 DDL 操作
- 单行数据的增删查，不支持修改，只支持单行的[[transaction]]
- 范围扫描(`where`的弱化版)

## 架构设计

最底层将数据按字典序排序分区后作为一个`tablet`，一个`tablet`对应一个[[GFS]]文件，是一颗 [[LSM树]]；存储`tablet`位置信息的是一颗[[B 树]]，可以缓存到客户端。

每个`tablet`由一个`master`和多个`replica`组成，`master`负责处理读写请求，`replica`负责备份数据，`master`和`replica`之间通过`gossip`协议进行通信。

[//begin]: # "Autogenerated link references for markdown compatibility"
[gfs]: GFS.md "Google File Systems @ghemawat2003google"
[nosql]: ../../database/sql/nosql.md "NoSQL"
[transaction]: <../../database/database systems/transaction.md> "transaction"
[lsm树]: ../../algorithm/data_structure/LSM树.md "LSM 树"
[b 树]: <../../algorithm/data_structure/B 树.md> "B 树"
[//end]: # "Autogenerated link references"
