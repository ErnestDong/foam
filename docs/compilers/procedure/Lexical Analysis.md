---
tags: compilers
---
# 词法分析

## 作用

词法分析是从左到右扫描，要尽量最小化 look-ahead 的程度

分析字符串子串 lexeme 为一个个 `token`(`<token_class, lexeme>`)，如`<Int, 42>`，`<Op, =>`这样的格式；使用[[Lexical Analysis#正则语言]]来确定 token_class

## 语言

- **alphabet** 字母表是一个有限符号集合
- **string** 串是某个字母表中符号的有穷序列，空串用$\epsilon$表示
- **language** 语言是字母表上任意的可数的集合

语言上有运算

- **union** 并 $x|y$ 为集合中的并运算
- **concatenation** 连接 xy 为把 y 附加到 x 后面，$xx=x^2$
- **closure** 闭包为 $L^*=\cup_0^\infty L^i$

### 正则语言

见[[正则表达式]]，通过正则语言来给词作规约，例如

- `keywords` 是如 `if` `else` 等的元素集合
- `numbers` 可以是 $digit^+$，其中 `digit` 是阿拉伯数字
- `identifier` 是 $[a-zA-Z]^+[a-zA-Z_0-9]^*$
- `whitespace` 是 $[\backslash n \backslash t\quad]^+$

#### Formal language

形式语言为在某个字母表上的语言(C on ASCII)，meaning function $L(e)$ 将语法 syntax e 映射到语义 semantics

## 规约

- 构建正则语言
- 扫描检测是否属于某个 token_class
  - 如果多个词满足，则选择长的那个
  - 如果一个词满足多个正则表达式，选择高优先级的那个
- 剩余的放到 error 里面

[//begin]: # "Autogenerated link references for markdown compatibility"
[Lexical Analysis#正则语言]: <Lexical Analysis.md> "词法分析"
[正则表达式]: ../../python/modules/正则表达式.md "正则表达式"
[//end]: # "Autogenerated link references"
