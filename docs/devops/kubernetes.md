---
tags: devops
---
# kubernetes

## 作用

- 服务发现和负载均衡
- 存储编排：Kubernetes 允许你自动挂载你选择的存储系统，例如本地存储、公共云提供商等。
- 自动部署和回滚
- 自动完成装箱计算
- 自我修复
- 密钥与配置管理

## 架构

一个Kubernetes集群至少包含一个控制平面(control plane)，以及一个或多个工作节点(worker node)。

- 控制平面：控制平面负责管理工作节点和维护集群状态。所有任务分配都来自于控制平面
  - kube-apiserver：提供了Kubernetes API服务，是集群的前端，所有的操作都是通过它来完成的
  - kube-controller-manager：负责管理集群中的各种控制器，例如：节点控制器、副本控制器、终端控制器等
  - kube-scheduler：负责集群中的任务调度，根据集群的资源情况，将任务分配到合适的节点上
  - ectd：保存了集群的状态信息，是集群的数据存储中心
- 工作节点：工作节点负责执行由控制平面分配的请求任务，运行实际的应用和工作负载
  - kube-let：负责管理工作节点，保证容器运行在工作节点上
  - kube-proxy：负责管理工作节点上的网络代理，保证容器之间的网络通信
  - container-runtime：负责管理容器的生命周期，例如：启动、停止、删除容器等。容器不只是[[docker]]，还有其他实现了 Kubernetes CRI (容器运行环境接口)的容器。

## 层级

- Pod 是包含一个或多个容器的容器组，是 Kubernetes 中创建和管理的最小对象。同一个Pod中的容器总是会被自动安排到集群中的同一节点，每个 Pod 有唯一的 IP 地址。
- Deployment是对Pod更高级的抽象。使Pod拥有多副本，自愈，扩缩容、滚动升级等能力。
- Service将运行在一组 Pods 上的应用程序公开为网络服务的抽象方法。为一组 Pod 提供相同的 DNS 名，并且在它们之间进行负载均衡。

[//begin]: # "Autogenerated link references for markdown compatibility"
[docker]: docker.md "docker"
[//end]: # "Autogenerated link references"
