---
tags: python
---
# 多进程

[[python]] 利用 multiprocessing 实现多[[进程]]，多[[进程]] 适合计算密集型的任务

实现方式与[多线程] 类似

## [[进程]]间的通信

[[进程]]之间是独立的，不会共享全局变量

### 通过[[队列]]通信

```python
import multiprocessing

def first(q,arg):
    data = [1,2,3]
    q.put(data)

def second(q,arg):
    data = q.get()
if __name__ == "__main__":
    q = multiprocessing.Queue()
    p1 = multiprocessing.Process(target=first, args=(q,1))
    p2 = multiprocessing.Process(target=second, args=(q,1))
    p1.start()
    p2.start()
```

## [[进程]]池

进程非常多时，可以用进程池来处理

```python
from multiprocessing import Pool

pool = Pool(MAX_PROCESS_NUM)
pool.apply_async(function)
pool.close() # 关闭后pool不再接受新进程
pool.join() # 等待所有进程结束
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[python]: ../python.md "python"
[进程]: <../../operating system/虚拟化/进程.md> "进程"
[队列]: ../../algorithm/data_structure/队列.md "队列"
[//end]: # "Autogenerated link references"
